<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible"content="IE=edge"/>
    <meta name="viewport"content="width-device-width,initial-scale=1.0"/>
    <!--    import google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;1,300;1,400;1,500;1,900&display=swap" rel="stylesheet">
    <!--    -->
    <link rel="stylesheet" href="../static/styles/all.min.css">
    <link rel="stylesheet" href="../static/styles/bootstrap.min.css">
    <!--    -->
    <link rel="stylesheet" href="../static/styles/login.css">
    <link rel="stylesheet" href="../static/styles/table.css">
    <title>patients table</title>
</head>
    <body>

        <!--   navbar starts     -->
        <nav class="navbar navbar-expand-lg sticky-top">
            <div class="container">
                <a class="navbar-brand" href="{{ url_for('home') }}">
                    <img src="../static/images/Emergency_(NGO)_logo.svg.png" alt="Emergency" height="50 px">
                </a>
                    <a href="{{ url_for('home') }}" class="log-out btn btn-primary rounded-pill main-btn ms-1"><i class="fa-solid fa-house"></i></a>
                </div>
            </div>
        </nav>
        <!--   navbar end     -->
        <div class="col-md-6 alertclass">
      {% with messages = get_flashed_messages(with_categories = true) %} 
      {% if messages %} 
      {% for category, message in messages %}
      {% if category == 'success' or category == 'danger' %}
      <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endif%}
      {% endfor %} {% endif%} {% endwith %}
    </div>
        
        <div >
     
        </div>
        <div class="content">
                <div class="content-table ">


                    <div class="scrollme">

                    <input type="text" id="nameInput" onkeyup="namefunc()" placeholder="Search by names..">
                    <input type="text" id="ssnInput" onkeyup="ssnfunc()" placeholder="Search by SSN..">
                    <input type="text" id="dateInput" onkeyup="datefunc()" placeholder="Search by Date of Registeration..">
                       
                        <table id="myTable" class="table table-bordered table-responsive">
                            <thead>
                                <tr >
                                    
                                    <th scope="col">SSN</th>
                                    <th scope="col">Name</th>
            
                                    <th scope="col" >Data of birth</th>
                                    <th scope="col" >Gender</th>
                                    <th scope="col" >Date of Registeration</th>
                                    <th scope="col" >Adderss</th>
                                    <th scope="col" >phone</th>
                                    <th scope="col" >Number of reports</th>
                                    
                                </tr>
                            </thead>
                            <tbody>
                            {% for patient, number_of_reports in table %}
                            
                                <tr>
                                    
                                    <td>{{patient.ssn}}</td>
                                    {% if patient.Sname %}
                                    <td>{{patient.Fname}} {{patient.Sname}}  {{patient.Lname}}</td>
                                    {% else %}
                                    <td>{{patient.Fname}}  {{patient.Lname}}</td>
                                    {% endif %}
                                    <td>{{patient.birth_date.strftime("%Y-%m-%d")}}</td>
                                    <td>{{patient.gender}}</td>
                                    <td>{{patient.date.strftime("%Y-%m-%d, %H:%M")}}</td>
                                    <td>{{patient.address}}</td>
                                    <td>{{patient.phone}}</td>
                                    <td>{{number_of_reports}}</td>
                                   
                                
                                {% endfor %}
                            </tbody>
                           
                        </table>
                        <script>
                            function namefunc() {
                              // Declare variables
                              var input, filter, table, tr, td, i, txtValue;
                              input = document.getElementById("nameInput");
                              filter = input.value.toUpperCase();
                              table = document.getElementById("myTable");
                              tr = table.getElementsByTagName("tr");
                            
                              // Loop through all table rows, and hide those who don't match the search query
                              for (i = 0; i < tr.length; i++) {
                                td = tr[i].getElementsByTagName("td")[1];
                                if (td) {
                                  txtValue = td.textContent || td.innerText;
                                  if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                    tr[i].style.display = "";
                                  } else {
                                    tr[i].style.display = "none";
                                  }
                                }
                              }
                            }
                            function ssnfunc() {
                              // Declare variables
                              var input, filter, table, tr, td, i, txtValue;
                              input = document.getElementById("ssnInput");
                              filter = input.value.toUpperCase();
                              table = document.getElementById("myTable");
                              tr = table.getElementsByTagName("tr");
                            
                              // Loop through all table rows, and hide those who don't match the search query
                              for (i = 0; i < tr.length; i++) {
                                td = tr[i].getElementsByTagName("td")[0];
                                if (td) {
                                  txtValue = td.textContent || td.innerText;
                                  if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                    tr[i].style.display = "";
                                  } else {
                                    tr[i].style.display = "none";
                                  }
                                }
                              }
                            }
                            function datefunc() {
                              // Declare variables
                              var input, filter, table, tr, td, i, txtValue;
                              input = document.getElementById("dateInput");
                              filter = input.value.toUpperCase();
                              table = document.getElementById("myTable");
                              tr = table.getElementsByTagName("tr");
                            
                              // Loop through all table rows, and hide those who don't match the search query
                              for (i = 0; i < tr.length; i++) {
                                td = tr[i].getElementsByTagName("td")[4];
                                if (td) {
                                  txtValue = td.textContent || td.innerText;
                                  if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                    tr[i].style.display = "";
                                  } else {
                                    tr[i].style.display = "none";
                                  }
                                }
                              }
                            }
                            
                            </script>
                    </div>
                </div>
                    </div>







            </form>
        </section>


        <section class="foot">
            <footer>
                <ul class="social_icon">
                    <li><a href="#"><i class="fa-brands fa-github"></i></a></li>
                </ul>
                <p style="font-size: 15px; color: var(--gray-color)">&copy; Database course Team 19</p>
            </footer>
        </section>

        <script src="../static/script/bootstrap.bundle.min.js"></script>
        <script src="../static/script/all.min.js"></script>
    </body>
</html>